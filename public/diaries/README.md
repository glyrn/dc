# 日记系统使用说明

本日记系统支持从文件系统读取日记文件并展示。以下是日记文件的组织和添加方法。

## 文件结构

日记文件按照以下结构组织：

```
public/diaries/
  ├── 2024-04/              # 年月文件夹
  │   ├── index.json        # 索引文件（可选）
  │   ├── 2024-04-01.json   # 日记文件（按日期命名）
  │   ├── 2024-04-05.json
  │   └── 2024-04-10.json
  ├── 2024-05/
  │   └── ...
  └── README.md             # 使用说明
```

## 添加新日记

### 1. 按文件夹分组（推荐）

1. 在 `public/diaries/` 目录下按"YYYY-MM"格式创建月份文件夹
2. 在月份文件夹中添加按"YYYY-MM-DD.json"格式命名的日记文件
3. 更新该月的 `index.json` 文件，添加新日记文件名（如果存在索引文件）

### 2. 单文件模式

如果在配置中使用单文件模式 (`config/diary.config.js` 中 `mode: 'file'`)，
可以直接在 `public/diaries/` 目录下添加按"YYYY-MM-DD.json"格式命名的日记文件。

## 日记文件格式

日记文件使用JSON格式，包含以下字段：

```json
{
  "标题": "日记标题",
  "内容": "日记正文内容...",
  "心情": "开心",  
  "日期": "2024-04-01"
}
```

心情可选值：
- 开心
- 愉快
- 沉思
- 成就感
- 兴奋
- 平静
- 疲惫
- 失落

## 配置文件

日记系统的配置文件位于 `src/config/diary.config.js`，可以修改配置文件来调整日记系统的行为。

主要配置项：
- `basePath`: 日记文件的根目录
- `mode`: 文件组织模式，'folder'（文件夹）或'file'（单文件）
- `entryStructure`: 日记文件中的字段名映射
- `moodMapping`: 心情名称映射

## 索引文件（可选）

如果月份文件夹中包含 `index.json` 文件，系统将优先使用索引文件来获取日记列表。
索引文件格式为：

```json
[
  "2024-04-01.json",
  "2024-04-05.json",
  "2024-04-10.json"
]
```

如果没有索引文件，系统将尝试按日期顺序（1-31日）检查每个可能的日记文件是否存在。 